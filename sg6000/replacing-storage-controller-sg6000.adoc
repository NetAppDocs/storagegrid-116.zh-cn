---
permalink: sg6000/replacing-storage-controller-sg6000.html 
sidebar: sidebar 
keywords: storagegrid, sg6000, storage node, storage appliance, Replacing, replace, storage controller, e2800, ef570, controller, remove, removing, removal, install, installing, installation 
summary: 如果 E2800 控制器或 EF570 控制器运行不正常或出现故障，您可能需要更换该控制器。 
---
= 更换存储控制器
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
如果 E2800 控制器或 EF570 控制器运行不正常或出现故障，您可能需要更换该控制器。

.您需要什么？ #8217 ；将需要什么
* 您的更换控制器的部件号与要更换的控制器相同。
* 您可以通过标签来识别连接到控制器的每个缆线。
* 您已安装 ESD 腕带，或者已采取其他防静电预防措施。
* 您有一个 1 号十字螺丝刀。
* 您可以按照 E 系列说明更换双工配置中的控制器。
+

IMPORTANT: 请仅在收到指示时或需要执行特定步骤的更多详细信息时才参考 E 系列说明。请勿依赖 E 系列说明来更换 StorageGRID 设备中的控制器，因为这些过程是不同的。

* 您已在数据中心中找到要更换控制器的物理存储设备。
+
xref:locating-controller-in-data-center.adoc[在数据中心中找到控制器]



您可以通过以下两种方式确定控制器是否出现故障：

* SANtricity System Manager 中的恢复 Guru 可指示您更换控制器。
* 控制器上的琥珀色警示 LED 亮起，表示控制器出现故障。
+

IMPORTANT: 如果磁盘架中的两个控制器的警示 LED 均亮起，请联系技术支持以获得帮助。



由于存储控制器架包含两个存储控制器，因此，只要满足以下条件，您就可以在设备启动并执行读 / 写操作时更换其中一个控制器：

* 磁盘架中的第二个控制器处于最佳状态。
* SANtricity System Manager 中 Recovery Guru 的详细信息区域中的 "`确定删除` " 字段显示是，表示可以安全删除此组件。



IMPORTANT: 如果可能，请将设备置于此替代操作步骤 的维护模式，以最大限度地减少意外错误或故障的潜在影响。


IMPORTANT: 如果磁盘架中的第二个控制器箱状态不是最佳，或者 Recovery Guru 指示无法卸下控制器箱，请联系技术支持。

更换控制器时，您必须从原始控制器中取出电池，然后将其安装到替代控制器中。在某些情况下，您可能还需要从原始控制器中卸下主机接口卡，并将其安装在替代控制器中。


NOTE: 大多数设备型号中的存储控制器不包括主机接口卡（ HIC ）。

.步骤
. 拆开新控制器的包装，将其放在无静电的平面上。
+
请保存包装材料，以便在运输故障控制器时使用。

. 在替代控制器的背面找到 MAC 地址和 FRU 部件号标签。
+
此图显示了 E2800 控制器。用于更换 EF570 控制器的操作步骤 是相同的。

+
image::../media/e2800_labels_on_controller.gif[E2800 控制器上的 MAC 和 FRU 标签]

+
|===
| Label | Label | Description 


 a| 
1.
 a| 
MAC 地址
 a| 
管理端口 1 的 MAC 地址（ "`P1` " ）。如果您使用 DHCP 获取原始控制器的 IP 地址，则需要使用此地址连接到新控制器。



 a| 
2.
 a| 
FRU 部件号
 a| 
FRU 部件号。此编号必须与当前安装的控制器的更换部件号匹配。

|===
. 准备删除控制器。
+
您可以使用 SANtricity 系统管理器执行这些步骤。有关其他详细信息，请根据需要参阅 E 系列说明以更换存储控制器。

+
.. 确认故障控制器的更换部件号与更换控制器的 FRU 部件号相同。
+
如果控制器出现故障并需要更换，则更换部件号将显示在 Recovery Guru 的 Details 区域中。如果需要手动查找此数字，可以在 * 基础 * 选项卡上查看控制器。

+

IMPORTANT: * 可能会丢失数据访问机会 -* 如果两个部件号不同，请勿尝试使用此操作步骤 。

.. 备份配置数据库。
+
如果删除控制器时出现问题，您可以使用保存的文件还原配置。

.. 收集设备的支持数据。
+

NOTE: 在更换组件之前和之后收集支持数据可确保在更换组件无法解决问题时，您可以向技术支持发送一整套日志。

.. 使计划更换的控制器脱机。


. 从设备中删除控制器：
+
.. 戴上 ESD 腕带或采取其他防静电预防措施。
.. 为缆线贴上标签，然后断开缆线和 SFP 的连接。
+

IMPORTANT: To prevent degraded performance, do not twist, fold, pinch, or step on the cables.

.. 通过挤压凸轮把手上的闩锁，直到其释放，然后打开右侧的凸轮把手，将控制器从设备中释放。
.. 用两只手和凸轮把手将控制器滑出设备。
+

IMPORTANT: 请始终用双手支撑控制器的重量。

.. 将控制器放在无静电的平面上，可拆卸盖朝上。
.. 向下按按钮并滑动外盖，以卸下外盖。


. 从发生故障的控制器中取出电池，然后将其安装到替代控制器中：
+
.. 确认控制器（电池和 DIMM 之间）中的绿色 LED 熄灭。
+
如果此绿色 LED 亮起，则表示控制器仍在使用电池电源。您必须等待此 LED 熄灭，然后才能卸下任何组件。

+
image::../media/e2800_internal_cache_active_led.gif[E2800 上的绿色 LED]

+
|===
| 项目 | Description 


 a| 
1.
 a| 
内部缓存活动 LED



 a| 
2.
 a| 
电池

|===
.. 找到电池的蓝色释放闩锁。
.. 向下推动释放闩锁并将其从控制器中移出，以解锁电池。
+
image::../media/e2800_remove_battery.gif[电池闩锁]

+
|===
| 项目 | Description 


 a| 
1.
 a| 
电池释放闩锁



 a| 
2.
 a| 
电池

|===
.. 抬起电池，将其滑出控制器。
.. 从更换用的控制器上卸下盖板。
.. 调整更换控制器的方向，使电池插槽面向您。
.. 将电池略微向下插入控制器。
+
您必须将电池前部的金属法兰插入控制器底部的插槽中，然后将电池顶部滑入控制器左侧的小对齐销下。

.. 向上移动电池闩锁以固定电池。
+
当闩锁卡入到位时，闩锁的底部会挂到机箱上的金属插槽中。

.. 将控制器翻转，以确认电池安装正确。
+

IMPORTANT: * 可能的硬件损坏 * —电池正面的金属法兰必须完全插入控制器上的插槽（如第一图所示）。如果电池安装不正确（如图 2 所示），则金属法兰可能会接触控制器板，从而导致损坏。

+
*** * 正确—电池的金属法兰已完全插入控制器上的插槽： *
+
image::../media/e2800_battery_flange_ok.gif[电池法兰正确]

*** * 不正确 - 电池的金属法兰未插入控制器上的插槽： *
+
image::../media/e2800_battery_flange_not_ok.gif[电池法兰不正确]



.. 更换控制器盖板。


. 将替代控制器安装到设备中。
+
.. 将控制器翻转，使可拆卸盖朝下。
.. 在凸轮把手处于打开位置的情况下，将控制器完全滑入设备中。
.. 将凸轮把手移至左侧，将控制器锁定到位。
.. 更换缆线和 SFP 。
.. 如果原始控制器使用 DHCP 作为 IP 地址，请在替代控制器背面的标签上找到 MAC 地址。请您的网络管理员将您删除的控制器的 DNS/network 和 IP 地址与替代控制器的 MAC 地址相关联。
+

NOTE: 如果原始控制器未使用 DHCP 作为 IP 地址，则新控制器将采用您删除的控制器的 IP 地址。



. 使用 SANtricity 系统管理器使控制器联机：
+
.. 选择 * 硬件 * 。
.. 如果图形显示了驱动器，请选择 * 显示磁盘架背面 * 。
.. 选择要置于联机状态的控制器。
.. 从上下文菜单中选择 * 置于联机状态 * ，然后确认要执行此操作。
.. 验证七段显示屏是否显示状态 `99` 。


. 确认新控制器处于最佳状态，并收集支持数据。


http://mysupport.netapp.com/info/web/ECMP1658252.html["NetApp E 系列系统文档站点"^]
