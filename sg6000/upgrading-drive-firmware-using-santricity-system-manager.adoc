---
permalink: sg6000/upgrading-drive-firmware-using-santricity-system-manager.html 
sidebar: sidebar 
keywords: storagegrid, sg6000, storage node, storage appliance, upgrade, upgrading, firmware, drive, disk, SANtricity System Manager, SANtricity 
summary: 您可以升级驱动器固件，以确保具有所有最新功能和错误修复。 
---
= 使用 SANtricity 系统管理器升级驱动器固件
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
您可以升级驱动器固件，以确保具有所有最新功能和错误修复。

.您需要的内容
* 存储设备处于最佳状态。
* 所有驱动器均处于最佳状态。
* 您已安装与您的 SANtricity 版本兼容的最新版本 StorageGRID System Manager 。
* 您已拥有 xref:placing-appliance-into-maintenance-mode.adoc[已将 StorageGRID 设备置于维护模式]。
+

NOTE: 维护模式会中断与存储控制器的连接，停止所有 I/O 活动并使所有驱动器脱机。

+

IMPORTANT: 请勿一次升级多个 StorageGRID 设备上的驱动器固件。这样做可能会导致发生原因 数据不可用，具体取决于您的部署模式和 ILM 策略。



.步骤
. 确认此设备已位于中 xref:placing-appliance-into-maintenance-mode.adoc[维护模式]。
. 使用以下方法之一访问 SANtricity System Manager ：
+
** 使用 StorageGRID 设备安装程序并选择 * 高级 * > * SANtricity 系统管理器 *
** 通过浏览到存储控制器 IP ： + ` * https://_Storage_Controller_IP_*` 来使用 SANtricity 系统管理器


. 如果需要，输入 SANtricity System Manager 管理员用户名和密码。
. 验证存储设备中当前安装的驱动器固件版本：
+
.. 在 SANtricity 系统管理器中，选择 * 支持 * > * 升级中心 * 。
.. 在驱动器固件升级下，选择 * 开始升级 * 。
+
升级驱动器固件将显示当前安装的驱动器固件文件。

.. 请在当前驱动器固件列中记下当前驱动器固件版本和驱动器标识符。
+
image::../media/storagegrid_update_drive_firmware.png[升级驱动器固件]

+
在此示例中：

+
*** 驱动器固件修订版为 * 。 MS02* 。
*** 驱动器标识符为 * 。 KPM51 VVG800G* 。


+
在关联驱动器列中选择 * 查看驱动器 * ，以显示这些驱动器在存储设备中的安装位置。

.. 关闭升级驱动器固件窗口。


. 下载并准备可用的驱动器固件升级：
+
.. 在驱动器固件升级下，选择 * NetApp 支持 * 。
.. 在 NetApp 支持网站上，选择 * 下载 * 选项卡，然后选择 * E 系列磁盘驱动器固件 * 。
+
此时将显示 E 系列磁盘固件页面。

.. 搜索存储设备中安装的每个 * 驱动器标识符 * ，并验证每个驱动器标识符是否具有最新的固件版本。
+
*** 如果固件版本不是链接，则此驱动器标识符的固件版本为最新。
*** 如果为驱动器标识符列出了一个或多个驱动器部件号，则可以对这些驱动器进行固件升级。您可以选择任何链接来下载固件文件。
+
image::../media/storagegrid_drive_firmware_download.png[E 系列磁盘固件页面]



.. 如果列出了更高版本的固件，请选择固件修订版中的链接（ download ）列以下载包含固件文件的 ` .zip` 归档。
.. 提取（解压缩）从支持站点下载的驱动器固件归档文件。


. 安装驱动器固件升级：
+
.. 在 SANtricity 系统管理器的驱动器固件升级下，选择 * 开始升级 * 。
.. 选择 * 浏览 * ，然后选择从支持站点下载的新驱动器固件文件。
+
驱动器固件文件的文件名类似于 + `D HUC101212CS600_30602291_MS01_2800_0002.DLP` 。

+
您最多可以选择四个驱动器固件文件，一次一个。如果多个驱动器固件文件与同一驱动器兼容，则会收到文件冲突错误。确定要用于升级的驱动器固件文件，然后删除另一个驱动器固件文件。

.. 选择 * 下一步 * 。
+
* 选择驱动器 * 列出了可使用选定固件文件进行升级的驱动器。

+
仅显示兼容的驱动器。

+
为驱动器选择的固件将显示在 * 建议的固件 * 中。如果必须更改此固件，请选择 * 返回 * 。

.. 选择 * 脱机（并行） * 升级。
+
您可以使用脱机升级方法，因为设备处于维护模式，此时所有驱动器和所有卷的 I/O 活动都将停止。

+

CAUTION: 除非您确定设备处于维护模式，否则请勿继续。如果在启动脱机驱动器固件更新之前未将设备置于维护模式，则可能会丢失发生原因 数据。

.. 在表的第一列中，选择要升级的一个或多个驱动器。
+
最佳实践是，将所有相同型号的驱动器升级到相同的固件修订版。

.. 选择 * 开始 * ，然后确认要执行升级。
+
如果需要停止升级，请选择 * 停止 * 。当前正在进行的所有固件下载均已完成。已取消所有尚未启动的固件下载。

+

IMPORTANT: 停止驱动器固件升级可能会导致数据丢失或驱动器不可用。

.. （可选）要查看已升级内容的列表，请选择 * 保存日志 * 。
+
此日志文件将保存在浏览器的下载文件夹中，名称为 `latest-upgrade-log-timestamp.txt` 。

+
如果在升级操作步骤期间出现以下任何错误，请采取适当的建议操作。

+
*** * 已分配的驱动器出现故障 *
+
出现此故障的一个原因可能是驱动器没有相应的签名。确保受影响的驱动器为授权驱动器。有关详细信息，请联系技术支持。

+
更换驱动器时，请确保更换驱动器的容量等于或大于要更换的故障驱动器。

+
您可以在存储阵列接收 I/O 时更换故障驱动器

*** * 检查存储阵列 *
+
**** 确保已为每个控制器分配 IP 地址。
**** 确保连接到控制器的所有缆线均未损坏。
**** 确保所有缆线均已紧密连接。


*** * 集成热备用驱动器 *
+
必须先更正此错误情况，然后才能升级固件。

*** * 卷组不完整 *
+
如果一个或多个卷组或磁盘池不完整，则必须更正此错误情况，然后才能升级固件。

*** * 当前正在任何卷组上运行的独占操作（后台介质 / 奇偶校验扫描除外） *
+
如果正在执行一个或多个独占操作，则必须先完成这些操作，然后才能升级固件。使用 System Manager 监控操作进度。

*** * 缺少卷 *
+
您必须先更正缺少的卷情况，然后才能升级固件。

*** * 任一控制器处于非最佳状态 *
+
其中一个存储阵列控制器需要注意。必须先更正此情况，然后才能升级固件。

*** 控制器对象图形之间的存储分区信息不匹配 *
+
验证控制器上的数据时出错。请联系技术支持以解决此问题描述。

*** * SPM 验证数据库控制器检查失败 *
+
控制器上发生存储分区映射数据库错误。请联系技术支持以解决此问题描述。

*** * 配置数据库验证（如果存储阵列的控制器版本支持） *
+
控制器上发生配置数据库错误。请联系技术支持以解决此问题描述。

*** * 与 MEL 相关的检查 *
+
请联系技术支持以解决此问题描述。

*** * 在过去 7 天内报告了 10 个以上的 DDN 信息性或严重 MEL 事件 *
+
请联系技术支持以解决此问题描述。

*** * 过去 7 天报告了 2 页以上的 2C 严重 MEL 事件 *
+
请联系技术支持以解决此问题描述。

*** * 过去 7 天报告了 2 个以上的 " 降级驱动器通道 " 严重 MEL 事件 *
+
请联系技术支持以解决此问题描述。

*** * 过去 7 天内 4 个以上的关键 MEL 条目 *
+
请联系技术支持以解决此问题描述。





. 如果此操作步骤 已成功完成，并且您在节点处于维护模式时还需要执行其他过程，请立即执行。完成后，或者如果遇到任何故障并希望重新启动，请选择 * 高级 * > * 重新启动控制器 * ，然后选择以下选项之一：
+
** 选择 * 重新启动到 StorageGRID *
** 选择 * 重新启动至维护模式 * 以重新启动控制器，同时使节点仍处于维护模式。如果您在操作步骤 期间遇到任何故障并希望重新启动，请选择此选项。节点重新启动至维护模式后，从出现故障的操作步骤 中的相应步骤重新启动。
+
image::../media/reboot_controller_from_maintenance_mode.png[在维护模式下重新启动控制器]

+
设备重新启动并重新加入网格可能需要长达 20 分钟的时间。要确认重新启动已完成且节点已重新加入网格，请返回网格管理器。节点页面应显示设备节点的正常状态（节点名称左侧没有图标），表示没有处于活动状态的警报，并且节点已连接到网格。



+
image::../media/node_rejoin_grid_confirmation.png[设备节点已重新加入网格]



.相关信息
xref:upgrading-santricity-os-on-storage-controllers.adoc[升级存储控制器上的 SANtricity 操作系统]
