---
permalink: primer/using-information-lifecycle-management.html 
sidebar: sidebar 
keywords: what is information lifecycle management, how to use ilm 
summary: 您可以使用信息生命周期管理 \ （ ILM ）来控制 StorageGRID 系统中所有对象的放置，持续时间和数据保护。ILM 规则可确定 StorageGRID 在一段时间内如何存储对象。您可以配置一个或多个 ILM 规则，然后将其添加到 ILM 策略中。 
---
= 使用信息生命周期管理
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
您可以使用信息生命周期管理（ ILM ）来控制 StorageGRID 系统中所有对象的放置，持续时间和数据保护。ILM 规则可确定 StorageGRID 在一段时间内如何存储对象。您可以配置一个或多个 ILM 规则，然后将其添加到 ILM 策略中。

ILM 规则定义：

* 应存储哪些对象。规则可以应用于所有对象，也可以指定筛选器来标识规则适用场景 中的对象。例如，规则只能应用于与特定租户帐户，特定 S3 分段或 Swift 容器或特定元数据值关联的对象。
* 存储类型和位置。对象可以存储在存储节点，云存储池或归档节点上。
* 创建的对象副本的类型。可以复制副本或对副本进行纠删编码。
* 对于复制的副本，为创建的副本数。
* 对于纠删编码副本，使用纠删编码方案。
* 对象的存储位置和副本类型会随时间发生变化。
* 在将对象载入网格时如何保护对象数据（同步放置或双提交）。


请注意，对象元数据不受 ILM 规则管理。而是将对象元数据存储在 Cassandra 数据库中，该数据库称为元数据存储。每个站点会自动维护三个对象元数据副本，以防止数据丢失。这些副本会均匀分布在所有存储节点上。



== ILM 规则示例

此示例 ILM 规则适用场景 属于租户 A 的对象它会为这些对象创建两个复制副本，并将每个副本存储在不同的站点上。这两个副本会保留 "`Forever ，` " ，这意味着 StorageGRID 不会自动删除它们。相反， StorageGRID 将保留这些对象，直到客户端删除请求或存储分段生命周期到期时将其删除为止。

此规则对载入行为使用平衡选项：租户 A 将对象保存到 StorageGRID 后，系统会立即应用双站点放置指令，除非无法立即创建所需的两个副本。例如，如果租户 A 保存对象时无法访问站点 2 ，则 StorageGRID 将在站点 1 的存储节点上创建两个临时副本。一旦站点 2 可用， StorageGRID 就会在该站点创建所需的副本。

image::../media/ilm_example_rule_2_copies_tenant_a.png[示例 ILM 规则 2 复制租户 A]



== ILM 策略如何评估对象

StorageGRID 系统的活动 ILM 策略控制所有对象的放置，持续时间和数据保护。

当客户端将对象保存到 StorageGRID 时，系统会根据活动策略中按顺序排列的一组 ILM 规则对这些对象进行评估，如下所示：

. 如果策略中第一个规则的筛选器与某个对象匹配，则会根据该规则的载入行为载入该对象，并根据该规则的放置说明进行存储。
. 如果第一个规则的筛选器与对象不匹配，则会根据策略中的每个后续规则对对象进行评估，直到匹配为止。
. 如果没有与对象匹配的规则，则会应用策略中默认规则的载入行为和放置说明。默认规则是策略中的最后一条规则，不能使用任何筛选器。它必须应用于所有租户，所有分段和所有对象版本。




== ILM 策略示例

此示例 ILM 策略使用三个 ILM 规则。

image::../media/policy_for_two_tenants.png[两个租户的策略示例]

在此示例中，规则 1 匹配属于租户 A 的所有对象这些对象会在三个站点上存储为三个复制副本。规则 1 不匹配属于其他租户的对象，因此会根据规则 2 对其进行评估。

规则 2 匹配其他租户的所有对象，但前提是它们大于 1 MB 。这些较大的对象在三个站点上使用 6+3 纠删编码进行存储。规则 2 与 1 MB 或更小的对象不匹配，因此会根据规则 3 评估这些对象。

规则 3 是策略中的最后一条规则和默认规则，不使用筛选器。规则 3 为规则 1 或规则 2 不匹配的所有对象（不属于租户 A 且小于 1 MB 的对象）创建两个复制副本。

image::../media/ilm_policy_and_rules.png[ILM 策略和规则]

* 相关信息 *

* xref:../ilm/index.adoc[使用 ILM 管理对象]

